<?xml version="1.0"?>
<robot name="final_robot" xmlns:xacro="http://www.ros.org/wiki/xacro">

<!-- //////////////////////////////////////////////////////////////////////////// -->	
<!--Xacro Properties-->
<!-- //////////////////////////////////////////////////////////////////////////// -->
<xacro:property name="deg_to_rad" value="0.01745329251994329577"/>
<xacro:property name="M_PI" value="3.14159"/>

<!--http://wiki.ros.org/urdf/XML/Transmission-->
<xacro:macro name="transmission_block" params="joint_name">
	<transmission name="tran1">
		<type>transmission_interface/SimpleTransmission</type>
		<joint name="${joint_name}">
			<hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
		</joint>
		<actuator name="motor1">
			<hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
			<mechanicalReduction>1</mechanicalReduction>
		</actuator>
	</transmission>
</xacro:macro>

<!-- //////////////////////////////////////////////////////////////////////////// -->	
<!--Fixed Base Link Frame-->
<!-- //////////////////////////////////////////////////////////////////////////// -->
  <link name="First_Link_Base_Box">
    <inertial>
      <origin xyz="-0.00019458 -0.0086769 0.02456" rpy="0 0 0" />
      <mass value="0.13002" />
      <inertia
        ixx="9.1622E-06"
        ixy="2.0859E-07"
        ixz="1.0004E-07"
        iyy="1.7192E-06"
        iyz="-3.5725E-06"
        izz="7.4547E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mastering_ros_robot/meshes/1_Link_Base_Box.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mastering_ros_robot/meshes/1_Link_Base_Box.STL" />
      </geometry>
    </collision>
  </link>

<!-- //////////////////////////////////////////////////////////////////////////// -->	
<!--Dual Motor Table Link-->
<!-- //////////////////////////////////////////////////////////////////////////// -->
  <link
    name="Second_Link_Dual_Table">
    <inertial>
      <origin
        xyz="0.00034487 3.4634E-06 0.04245"
        rpy="0 0 0" />
      <mass
        value="0.18993" />
      <inertia
        ixx="5.4201E-05"
        ixy="3.1591E-09"
        ixz="-6.1419E-07"
        iyy="0.00025615"
        iyz="9.5935E-09"
        izz="0.00020195" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mastering_ros_robot/meshes/2_Link_Dual_Table.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mastering_ros_robot/meshes/2_Link_Dual_Table.STL" />
      </geometry>
    </collision>
  </link>
  
 <!--Joint 1--> 
  <joint
    name="First_Joint_Axis"
    type="continuous">
    <origin
      xyz="0 0 0.04318"
      rpy="9.0613E-27 6.983E-15 1.2976E-12" />
    <parent
      link="First_Link_Base_Box" />
    <child
      link="Second_Link_Dual_Table" />
    <axis
      xyz="0 0 1" />
    <dynamics damping="50" friction="1"/>
  </joint>
  
<!-- //////////////////////////////////////////////////////////////////////////// -->	
<!--Long Arm Link-->
<!-- //////////////////////////////////////////////////////////////////////////// -->
  <link
    name="Third_Link_Long_Arm">
    <inertial>
      <origin
        xyz="0.00028867 -0.00082645 0.15706"
        rpy="0 0 0" />
      <mass
        value="0.11628" />
      <inertia
        ixx="0.00053882"
        ixy="-2.7692E-08"
        ixz="-1.5559E-06"
        iyy="0.00055602"
        iyz="-5.3139E-06"
        izz="1.8096E-05" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mastering_ros_robot/meshes/3_Link_Long_Arm.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mastering_ros_robot/meshes/3_Link_Long_Arm.STL" />
      </geometry>
    </collision>
  </link>
 
<!--Joint 2--> 
  <joint
    name="Second_Joint_Axis"
    type="continuous">
    <origin
      xyz="0 0 0.067036"
      rpy="2.3456E-13 -6.9889E-09 -1.3184E-12" />
    <parent
      link="Second_Link_Dual_Table" />
    <child
      link="Third_Link_Long_Arm" />
    <axis
      xyz="1 0 0" />
    <dynamics damping="50" friction="1"/>
  </joint>
  
<!-- //////////////////////////////////////////////////////////////////////////// -->	
<!--Short Arm Link-->
<!-- //////////////////////////////////////////////////////////////////////////// -->
  <link
    name="Fourth_Link_Short_Arm">
    <inertial>
      <origin
        xyz="0.00033787 -0.00043726 0.11984"
        rpy="0 0 0" />
      <mass
        value="0.099345" />
      <inertia
        ixx="0.00014073"
        ixy="-1.4628E-08"
        ixz="-6.7411E-07"
        iyy="0.00014057"
        iyz="-2.1673E-06"
        izz="1.6518E-07" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mastering_ros_robot/meshes/4_Link_Short_Arm.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mastering_ros_robot/meshes/4_Link_Short_Arm.STL" />
      </geometry>
    </collision>
  </link>
  
 <!--Joint 3-->
  <joint
    name="Third_Joint_Axis"
    type="continuous">
    <origin
      xyz="0 0 0.21947"
      rpy="-2.2063E-13 -6.9889E-09 3.4904E-15" />
    <parent
      link="Third_Link_Long_Arm" />
    <child
      link="Fourth_Link_Short_Arm" />
    <axis
      xyz="1 0 0" />
    <dynamics damping="50" friction="1"/>
  </joint>
  
<!-- //////////////////////////////////////////////////////////////////////////// -->	
<!--Wrist Link-->
<!-- //////////////////////////////////////////////////////////////////////////// -->
  <link
    name="Fifth_Link_Wrist">
    <inertial>
      <origin
        xyz="-4.5725E-07 -0.0029791 0.060321"
        rpy="0 0 0" />
      <mass
        value="0.06737" />
      <inertia
        ixx="1.6485E-05"
        ixy="3.4502E-11"
        ixz="5.9432E-11"
        iyy="1.841E-05"
        iyz="3.5105E-06"
        izz="4.7984E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mastering_ros_robot/meshes/5_Link_Wrist.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mastering_ros_robot/meshes/5_Link_Wrist.STL" />
      </geometry>
    </collision>
  </link>
  
 <!--Joint 4-->
  <joint
    name="Fourth_Joint_Axis"
    type="continuous">
    <origin
      xyz="0 0 0.15597"
      rpy="3.6577E-17 -6.9889E-09 3.4904E-15" />
    <parent
      link="Fourth_Link_Short_Arm" />
    <child
      link="Fifth_Link_Wrist" />
    <axis
      xyz="1 0 0" />
    <dynamics damping="50" friction="1"/>
  </joint>
  
<!-- //////////////////////////////////////////////////////////////////////////// -->	
<!--Gripper Link-->
<!-- //////////////////////////////////////////////////////////////////////////// -->
  <link
    name="Sixth_Link_Gripper_Motors">
    <inertial>
      <origin
        xyz="-3.0635E-05 -0.00098569 0.027553"
        rpy="0 0 0" />
      <mass
        value="0.090059" />
      <inertia
        ixx="2.7887E-06"
        ixy="1.2423E-09"
        ixz="1.0838E-09"
        iyy="3.1137E-05"
        iyz="6.2968E-07"
        izz="2.9933E-05" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mastering_ros_robot/meshes/6_Link_Gripper_Motors.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mastering_ros_robot/meshes/6_Link_Gripper_Motors.STL" />
      </geometry>
    </collision>
  </link>
  
 <!--Joint 5-->
  <joint
    name="Fifth_Joint_Axis"
    type="continuous">
    <origin
      xyz="0 -0.01475 0.093645"
      rpy="-6.983E-15 -3.4639E-15 -2.1972E-10" />
    <parent
      link="Fifth_Link_Wrist" />
    <child
      link="Sixth_Link_Gripper_Motors" />
    <axis
      xyz="0 0 1" />
    <dynamics damping="50" friction="1"/>
  </joint>
  
<!-- //////////////////////////////////////////////////////////////////////////// -->	
<!--Left Gripper Link-->
<!-- //////////////////////////////////////////////////////////////////////////// -->
  <link
    name="Seventh_Link_Left_Gripper">
    <inertial>
      <origin
        xyz="0.0086076 -0.0057426 0.039386"
        rpy="0 0 0" />
      <mass
        value="0.010019" />
      <inertia
        ixx="9.439E-06"
        ixy="-5.0788E-07"
        ixz="2.378E-06"
        iyy="9.8633E-06"
        iyz="2.0315E-06"
        izz="1.4122E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mastering_ros_robot/meshes/7_Link_Left_Gripper.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mastering_ros_robot/meshes/7_Link_Left_Gripper.STL" />
      </geometry>
    </collision>
  </link>
  
 <!--Joint 6-->
  <joint
    name="Sixth_Joint_Axis"
    type="continuous">
    <origin
      xyz="0.018636 -0.000852 0.041136"
      rpy="-1.1737E-16 2.0967E-08 -3.4944E-17" />
    <parent
      link="Sixth_Link_Gripper_Motors" />
    <child
      link="Seventh_Link_Left_Gripper" />
    <axis
      xyz="0 1 0" />
    <dynamics damping="50" friction="1"/>
  </joint>
  
<!-- //////////////////////////////////////////////////////////////////////////// -->	
<!--Right Gripper Link-->
<!-- //////////////////////////////////////////////////////////////////////////// -->
  <link
    name="Eigth_Link_Right_Gripper">
    <inertial>
      <origin
        xyz="-0.008556 -0.0057426 0.039398"
        rpy="0 0 0" />
      <mass
        value="0.010019" />
      <inertia
        ixx="9.4327E-06"
        ixy="5.1054E-07"
        ixz="-2.3885E-06"
        iyy="9.8633E-06"
        iyz="2.0309E-06"
        izz="1.4184E-06" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mastering_ros_robot/meshes/8_Link_Right_Gripper.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mastering_ros_robot/meshes/8_Link_Right_Gripper.STL" />
      </geometry>
    </collision>
  </link>
  
 <!--Joint 7-->
  <joint
    name="Seventh_Joint_Axis"
    type="continuous">
    <origin
      xyz="-0.018636 -0.000852 0.041136"
      rpy="-1.2416E-16 2.0967E-08 -6.2579E-17" />
    <parent
      link="Sixth_Link_Gripper_Motors" />
    <child
      link="Eigth_Link_Right_Gripper" />
    <axis
      xyz="0 1 0" />
    <dynamics damping="50" friction="1"/>
  </joint>
  
<!-- //////////////////////////////////////////////////////////////////////////// -->	
<!--Grasper Frame Link-->
<!-- //////////////////////////////////////////////////////////////////////////// -->
<link
    name="Reference_Link">
    <inertial>
      <origin
        xyz="0.0005 0.0005 -0.0005"
        rpy="0 0 0" />
      <mass
        value="1E-06" />
      <inertia
        ixx="0"
        ixy="0"
        ixz="0"
        iyy="0"
        iyz="0"
        izz="0" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://mastering_ros_robot/meshes/Reference_Link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.75294 0.75294 0.75294 1" />
      </material>
    </visual>
  </link>
  
<!--Reference Joint-->
  <joint
    name="Reference Joint"
    type="fixed">
    <origin
      xyz="0 -0.016301 0.15004"
      rpy="-6.983E-15 2.0967E-08 2.1976E-10" />
    <parent
      link="Sixth_Link_Gripper_Motors" />
    <child
      link="Reference_Link" />
  </joint>

  
<!-- //////////////////////////////////////////////////////////////////////////// -->	
<!--Transmissions ROS Control-->
<!-- //////////////////////////////////////////////////////////////////////////// -->
<xacro:transmission_block joint_name="First_Joint_Axis"/>
<xacro:transmission_block joint_name="Second_Joint_Axis"/>
<xacro:transmission_block joint_name="Third_Joint_Axis"/>
<xacro:transmission_block joint_name="Fourth_Joint_Axis"/>
<xacro:transmission_block joint_name="Fifth_Joint_Axis"/>
<xacro:transmission_block joint_name="Sixth_Joint_Axis"/>
<xacro:transmission_block joint_name="Seventh_Joint_Axis"/>

<!-- //////////////////////////////////////////////////////////////////////////// -->	
<!--Gazebo_ROS_Control Plugin-->
<!-- //////////////////////////////////////////////////////////////////////////// -->
<gazebo>
    <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
      <robotNamespace>/final_robot</robotNamespace>
    </plugin>
</gazebo>

</robot>
